@model IEnumerable<ChatModule.DBShema.Models.Chatlog>

@{
    ViewBag.Title = "Index";
}

<div id="top">
    <h2>Chat</h2>
    <h4></h4>
</div>
@*<div id="login" style="margin-top:30px;">
    <label for="aktUser">Ihr Name: </label>
    <div id="aktUser"></div> <button type="submit" onclick="Chat.Login();">Auswählen</button>
</div>
<div><button onclick="Chat.Logout();" class="k-button">Logout</button></div>*@
<button class="k-button"><a href="http://nik-pc:1234/Chatlogs/ClearChat">Clear Chat</a></button>
<div id="chatContent">
    @ViewBag.test;
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:400,600,700' rel='stylesheet' type='text/css'>
    <div id="chatbox">
        @*<div id="tabstrip">
            <ul>
                <li>Friendlist</li>
                <li>Chatrooms</li>
            </ul>*@
            <div id="friendslist">
            @*@foreach (var item in Model)
                {
                    "<div id='" + item.category_id + "' class='friend'>" +
                        "<p>" +
                            "<strong>" + item.Category.bezeichnung + "</ strong ></ br >" +
                        "</p>" +
                        "<div class='status available'></div>" +
                    "</div>"
                }*@

                <div id="topmenu">
                    <span class="friends"></span>
                    <span class="chats" @*onclick="Chat.Chatrooms();*@"></span>
                    <span class="history"></span>
                </div>
                <div id="tabstrip1" style="height: auto !important;">
                    <div id="friends">

                    </div>

                </div>
            @*</div>*@
        @*<div id="tabstrip2">
            <div id="chatrooms"></div>
        </div>*@
            </div>
        @*****************************************Tabstrip1********************************************************@
        <div id="chatview" class="p1">
            <div id="profile">

                <div id="close">
                    <div class="cy"></div>
                    <div class="cx"></div>
                </div>
                <p></p><br />
                <span></span>
            </div>
            <div id="chat-messages">
                

            </div>

            <div id="sendmessage">
                <input type="text" placeholder="Send message..." id="message"/>
                <button id="send" type="submit" onclick="Chat.SendMessage2Support();"></button>
            </div><br />
            <div id="isTyping" style="position:absolute;opacity:0.5;"></div>

        </div>
    </div>
</div>
@* Wird die Applikartion von Außen aufgerung (partitial = true) *@
@{

    if (ViewBag.Partial == true)
    {
        <link rel="stylesheet" href="~/Scripts/KendoUI/styles/kendo.common.min.css" />
        <link rel="stylesheet" href="~/Scripts/KendoUI/styles/kendo.default.min.css" />
        <link rel="stylesheet" href="~/Scripts/KendoUI/styles/kendo.default.mobile.min.css" />

        <script src="~/Scripts/KendoUI/js/jquery.min.js"></script>
        <script src="~/Scripts/KendoUI/js/kendo.all.min.js"></script>

        <link href="~/Scripts/bootstrap/css/bootstrap.min.css" rel="stylesheet">
        <!--Reference the SignalR library. -->
        <script src="~/Scripts/jquery.signalR-2.2.1.min.js"></script>
        <!--Reference the autogenerated SignalR hub script. -->
        <script src="~/signalr/hubs"></script>

        <!--For Notification-->
        <link href="@ChatModule.Core.Fingerprint.Tag("/Scripts/css/NotificationCustomStyle.css")" rel="stylesheet">
        <script src="~/Scripts/notify.min.js"></script>
        <link href="@ChatModule.Core.Fingerprint.Tag("/Scripts/css/ChatCustomStyle.css")" rel="stylesheet">
        <script src="@ChatModule.Core.Fingerprint.Tag("/Scripts/js/ChatCustomScript.js")"></script>
    }
    else
    {
    
        <link rel="stylesheet" href="~/Scripts/KendoUI/styles/kendo.common.min.css" />
        <link rel="stylesheet" href="~/Scripts/KendoUI/styles/kendo.default.min.css" />
        <link rel="stylesheet" href="~/Scripts/KendoUI/styles/kendo.default.mobile.min.css" />

        <script src="~/Scripts/KendoUI/js/jquery.min.js"></script>
        <script src="~/Scripts/KendoUI/js/kendo.all.min.js"></script>

        <link href="~/Scripts/bootstrap/css/bootstrap.min.css" rel="stylesheet">
        <!--Reference the SignalR library. -->
        <script src="~/Scripts/jquery.signalR-2.2.1.min.js"></script>
        <!--Reference the autogenerated SignalR hub script. -->
        <script src="~/signalr/hubs"></script>

        <!--For Notification-->
        @*<link href="@ChatModule.Core.Fingerprint.Tag("/Scripts/css/NotificationCustomStyle.css")" rel="stylesheet">*@
        <link href="/Scripts/css/NotificationCustomStyle.css" rel="stylesheet">
        <script src="~/Scripts/notify.min.js"></script>
        <link href="@ChatModule.Core.Fingerprint.Tag("/Scripts/css/ChatCustomStyle.css")" rel="stylesheet">
        <script src="@ChatModule.Core.Fingerprint.Tag("/Scripts/js/ChatCustomScript.js")"></script>
    }
}

    
<script>
    $(function () {
        $("#message").keydown(function (e) {
            if (e.keyCode == 13) {
                send.click();
            }
        });
        Chat.Init(@ViewBag.CurrentUserId);
    });
</script>