@model IEnumerable<ChatModule.DBShema.Models.Chatlog>

@{
    ViewBag.Title = "Index";
}

<div id="top">
    <h4></h4>
    <h5></h5>
</div>

@*<button class="k-button"><a href="http://ham-hau-12254d:1239/Chat/Chatlogs/ClearChat">Clear Chat</a></button>*@
<div id="chatContent">
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:400,600,700' rel='stylesheet' type='text/css'>
    <div id="chatbox">
        <div id="chooseSupportDiv">
            <div id="chooseSupport" style="display:none;width:300px;" ></div>
        </div>
        @*<div id="tabstrip">
            <ul>
                <li>Friendlist</li>
                <li>Chatrooms</li>
            </ul>*@
            <div id="friendslist">
            @*@foreach (var item in Model)
                {
                    "<div id='" + item.category_id + "' class='friend'>" +
                        "<p>" +
                            "<strong>" + item.Category.bezeichnung + "</ strong ></ br >" +
                        "</p>" +
                        "<div class='status available'></div>" +
                    "</div>"
                }*@

                @*<div id="topmenu">
                    <span class="friends"></span>
                    <span class="chats" @*onclick="Chat.Chatrooms();"></span>
                    <span class="history"></span>
                </div>*@
                <div id="tabstrip1" style="height: auto !important;">
                    <div id="friends">

                    </div>
                </div>
            @*</div>*@
        @*<div id="tabstrip2">
            <div id="chatrooms"></div>
        </div>*@
            </div>
        
        
        @*****************************************Tabstrip1********************************************************@
        <div id="chatview" class="p1">
            <div id="profile">
            </div>
            
            <div id="chat-messages">
                

            </div>

            <div id="sendmessage" style="position:relative;">
                    <span id="notAllowed" style="position:absolute;z-index:1;top:20%;left:50%"></span>
                    <button id="send" onclick="Chat.SendMessage();"></button>
                    <textarea id="messageeditor" style="position:relative;" name="message" placeholder="Schreiben Sie hier Ihre Nachricht...Enter zum Senden, Enter+Shift für Absatz"></textarea>
                    
                @*<input type="text" placeholder="Send message..." id="message"/>
                <button id="send" type="submit" onclick="Chat.SendMessage();"></button>*@
            </div><br />
            <div id="isTyping" style="position:absolute;opacity:0.5;"></div>

        </div>
    </div>
</div>
@* Wird die Applikartion von Außen aufgerung (partitial = true) *@
@{

    if (ViewBag.Partial == true)
    {
        @*<link rel="stylesheet" href="~/Scripts/KendoUI/styles/kendo.common.min.css" />
        <link rel="stylesheet" href="~/Scripts/KendoUI/styles/kendo.default.min.css" />
        <link rel="stylesheet" href="~/Scripts/KendoUI/styles/kendo.default.mobile.min.css" />

        <script src="~/Chat/Scripts/KendoUI/js/jquery.min.js"></script>
        <script src="~/Scripts/KendoUI/js/kendo.all.min.js"></script>

        <link href="~/Scripts/bootstrap/css/bootstrap.min.css" rel="stylesheet">*@
        <!--Reference the SignalR library. -->
        <script src="~/Scripts/jquery.signalR-2.2.1.min.js"></script>
        <!--Reference the autogenerated SignalR hub script. -->
        <script src="~/signalr/hubs"></script>

        <!--For Notification-->
        @*<link href="~/Scripts/css/NotificationCustomStyle.css" rel="stylesheet">
        <script src="~/Scripts/notify.min.js"></script>*@
        <link href="~/Scripts/css/ChatCustomStyle.css" rel="stylesheet">
        <script src="~/Scripts/js/ChatCustomScript.js"></script>
    }
    else
    {
    
        <link rel="stylesheet" href="~/Scripts/KendoUI/styles/kendo.common.min.css" />
        <link rel="stylesheet" href="~/Scripts/KendoUI/styles/kendo.default.min.css" />
        <link rel="stylesheet" href="~/Scripts/KendoUI/styles/kendo.default.mobile.min.css" />

        <script src="~/Scripts/KendoUI/js/jquery.min.js"></script>
        <script src="~/Scripts/KendoUI/js/kendo.all.min.js"></script>

        <link href="~/Scripts/bootstrap/css/bootstrap.min.css" rel="stylesheet">
        <!--Reference the SignalR library. -->
        <script src="~/Scripts/jquery.signalR-2.2.1.min.js"></script>
        <!--Reference the autogenerated SignalR hub script. -->
        <script src="~/signalr/hubs"></script>

        <!--For Notification-->
        @*<link href="@ChatModule.Core.Fingerprint.Tag("/Scripts/css/NotificationCustomStyle.css")" rel="stylesheet">*@
        <link href="/Scripts/css/NotificationCustomStyle.css" rel="stylesheet">
        <script src="~/Scripts/notify.min.js"></script>
        <link href="@ChatModule.Core.Fingerprint.Tag("/Scripts/css/ChatCustomStyle.css")" rel="stylesheet">
        <script src="@ChatModule.Core.Fingerprint.Tag("/Scripts/js/ChatCustomScript.js")"></script>
    }
}

    
<script>
    $(function () {
        //var user = $.connection.userHub;
        //$("#message").keydown(function (e) {
        //    if (e.keyCode == 13) {
        //        send.click();
        //    }
        //});

        Chat.Init(@ViewBag.CurrentUserId, "@ViewBag.Partial");
    });
</script>